<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockApp Melchisédech</title>
    <link rel="stylesheet" href="styles.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <section id="auth-view" class="auth-view active-view">
        <div class="auth-container">
            <h2><i class="fas fa-user-lock"></i> Connexion </h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">Nom d'utilisateur</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group password-group">
                    <label for="password">Mot de passe</label>
                    <input type="password" id="password" required>
                    <i class="fas fa-eye password-toggle" id="togglePassword"></i>
                </div>
                <div class="alert alert-error" id="login-error" style="display: none;"></div>
                <button type="submit" class="btn btn-primary btn-large">Se connecter</button>
            </form>
            <p class="hint">Identifiants de test : **admin** / **password**</p>
        </div>
    </section>

    <div class="container" id="main-app-container" style="display: none;">
        <header>
            <h1><i class="fas fa-chart-line"></i> StockApp Melchisédech - Gestion Avancée</h1>
            <div class="header-actions">
                <button class="btn btn-success" id="show-dashboard-btn"><i class="fas fa-tachometer-alt"></i> Dashboard</button>
                <button class="btn btn-secondary" id="show-list-btn"><i class="fas fa-warehouse"></i> Inventaire</button>
                <button class="btn btn-primary" id="show-purchase-form-btn"><i class="fas fa-dolly-flatbed"></i> Enregistrer un Achat</button>
                <button class="btn btn-warning" id="show-purchase-report-btn">Rapport Achats</button>
                <button class="btn btn-info" id="show-report-btn">Rapport Ventes</button>
                <button class="btn btn-danger" id="show-sell-btn"><i class="fas fa-cash-register"></i> Enregistrer une Vente</button>
                <button class="btn btn-primary" id="show-add-btn"><i class="fas fa-plus-circle"></i> Ajouter Produit</button>
                <button class="btn btn-info" id="show-about-btn"><i class="fas fa-info-circle"></i> À Propos</button> 
            </div>
        </header>
        
        <main>
            <section id="dashboard-view" class="view">
                <h2>Tableau de Bord des Performances</h2>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <i class="fas fa-euro-sign kpi-icon"></i>
                        <h3>Revenu Total (Ventes)</h3>
                        <p id="kpi-revenue" class="kpi-value">0.00 $</p>
                    </div>
                    <div class="kpi-card">
                        <i class="fas fa-dollar-sign kpi-icon"></i>
                        <h3>Coût d'Achat Total</h3>
                        <p id="kpi-cost" class="kpi-value">0.00 $</p>
                    </div>
                    <div class="kpi-card primary-kpi">
                        <i class="fas fa-piggy-bank kpi-icon"></i>
                        <h3>Marge Brute</h3>
                        <p id="kpi-profit" class="kpi-value">0.00 $</p>
                    </div>
                    <div class="kpi-card">
                        <i class="fas fa-cubes kpi-icon"></i>
                        <h3>Produits en Stock</h3>
                        <p id="kpi-count" class="kpi-value">0</p>
                    </div>
                </div>

                <div id="alert-container-dashboard">
                    </div>
            </section>

            <section id="product-list-view" style="display: none;">
                <h2><i class="fas fa-boxes"></i> Inventaire Actuel</h2>
                <div id="alert-container"></div>
                <table id="product-list-table">
                    <thead>
                        <tr>
                            <th>Nom du Produit</th>
                            <th>Quantité</th>
                            <th>Prix Achat ($)</th>
                            <th>Seuil Min</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="product-tbody"></tbody>
                </table>
                <p id="empty-stock-message" class="alert alert-low-stock" style="display: none;">
                    Aucun produit en stock. Ajoutez-en un pour commencer, svp !
                </p>
            </section>

            <section id="product-form-view" class="form-view" style="display: none;">
                <h2 id="form-title"><i class="fas fa-edit"></i> Ajouter un Nouveau Produit </h2>
                <form id="product-form">
                    <input type="hidden" id="product-id"> 
                    <div class="form-group">
                        <label for="name">Nom du Produit</label>
                        <input type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="price">Prix Unitaire d'Achat ($) / Coût</label>
                        <input type="number" id="price" required min="0.01" step="0.01" value="0.01">
                    </div>
                    
                    <div class="form-group" id="initial-quantity-group">
                        <label for="initialQuantity">Quantité Initiale Achetée</label>
                        <input type="number" id="initialQuantity" required min="0" value="0">
                    </div>

                    <div class="form-group" id="global-cost-group">
                        <label for="globalCost">Coût Global de l'Achat ($)</label>
                        <input type="number" id="globalCost" readonly value="0.00" step="0.01">
                    </div>
                    
                    <div class="form-group">
                        <label for="minStockLevel">Niveau de Stock Minimum (Alerte)</label>
                        <input type="number" id="minStockLevel" required min="0" value="0">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-form-btn">Annuler</button>
                        <button type="submit" class="btn btn-primary">Enregistrer/Mettre à jour</button>
                    </div>
                </form>
            </section>
            
            <section id="purchase-form-view" class="form-view" style="display: none;">
                <h2><i class="fas fa-truck-loading"></i> Enregistrer un Achat / Entrée de Stock</h2>
                <div class="alert alert-error" id="purchase-error" style="display: none;"></div>
                <form id="purchase-form">
                    <div class="form-group">
                        <label for="purchase-product-id">Produit Acheté</label>
                        <select id="purchase-product-id" required></select>
                    </div>
                    <div class="form-group">
                        <label for="purchase-unit-cost">Coût Unitaire Réel d'Achat ($)</label>
                        <input type="number" id="purchase-unit-cost" required value="0.00" step="0.01" min="0.01">
                    </div>
                    <div class="form-group">
                        <label for="purchase-quantity">Quantité Achetée (Entrée)</label>
                        <input type="number" id="purchase-quantity" required min="1" value="1">
                    </div>
                    <div class="form-group">
                        <label for="purchase-supplier">Fournisseur / Source</label>
                        <input type="text" id="purchase-supplier" placeholder="Ex: Marchand X ou usine Y (Optionnel)">
                    </div>
                    <div class="form-group">
                        <label for="purchase-total-cost">Coût Total de l'Achat ($)</label>
                        <input type="number" id="purchase-total-cost" readonly value="0.00" step="0.01">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-purchase-btn">Annuler</button>
                        <button type="submit" class="btn btn-primary">Enregistrer l'Achat et Mettre à Jour le Stock</button>
                    </div>
                </form>
            </section>
            
            <section id="sale-form-view" class="form-view" style="display: none;">
                <h2><i class="fas fa-handshake"></i> Enregistrer une Vente</h2>
                <div class="alert alert-error" id="sale-error" style="display: none;"></div>
                <form id="sale-form">
                    <div class="form-group">
                        <label for="sale-product-id">Produit Vendu</label>
                        <select id="sale-product-id" required></select>
                    </div>
                    <div class="form-group">
                        <label for="sale-unit-price">Prix Unitaire de Vente ($)</label>
                        <input type="number" id="sale-unit-price" required value="0.00" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="sale-quantity">Quantité Vendue</label>
                        <input type="number" id="sale-quantity" required min="1" value="1">
                    </div>
                    <div class="form-group">
                        <label for="sale-customer-name">Nom du Client (Livraison)</label>
                        <input type="text" id="sale-customer-name" placeholder="Ex: Jean Dupont (Optionnel)">
                    </div>
                    <div class="form-group">
                        <label for="sale-delivery-address">Adresse de Livraison (Optionnel)</label>
                        <input type="text" id="sale-delivery-address" placeholder="Ex: 15 Rue de la Victoire, Mbujimayi">
                    </div>
                    <div class="form-group">
                        <label for="sale-total-price">Prix Général (Total) ($)</label>
                        <input type="number" id="sale-total-price" readonly value="0.00" step="0.01">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-sale-btn">Annuler</button>
                        <button type="submit" class="btn btn-danger">Enregistrer la Vente</button>
                    </div>
                </form>
            </section>

            <section id="sale-report-view" class="report-view" style="display: none;">
                <h2><i class="fas fa-file-invoice-dollar"></i> Rapport de Ventes</h2>
                <div class="report-actions"><button class="btn btn-info" id="print-report-btn">🖨️ Imprimer / Exporter PDF</button></div>
                <table id="sale-report-table"><thead><tr><th>Date & Heure</th><th>Produit</th><th>Prix Unit. Vendu ($)</th><th>Quantité</th><th>Total Vente ($)</th><th>Client</th><th>Adresse de Livraison</th></tr></thead><tbody id="sale-report-tbody"></tbody><tfoot id="sale-report-tfoot"></tfoot></table>
                <p id="empty-sales-message" class="alert alert-low-stock" style="display: none;">Aucune vente enregistrée.</p>
            </section>
            
            <section id="purchase-report-view" class="report-view" style="display: none;">
                <h2><i class="fas fa-file-invoice"></i> Rapport des Achats</h2>
                <div class="report-actions purchase-report-actions"><button class="btn btn-info" id="print-purchase-report-btn">🖨️ Imprimer / Exporter PDF</button></div>
                <table id="purchase-report-table"><thead><tr><tr><th>Date & Heure</th><th>Produit</th><th>Coût Unitaire Achat ($)</th><th>Quantité Achetée</th><th>Coût Total Achat ($)</th><th>Fournisseur</th></tr></tr></thead><tbody id="purchase-report-tbody"></tbody><tfoot id="purchase-report-tfoot"></tfoot></table>
                <p id="empty-purchases-message" class="alert alert-low-stock" style="display: none;">Aucun achat enregistré.</p>
            </section>
            
            <section id="about-view" class="view" style="display: none;">
                <h2><i class="fas fa-info-circle"></i> À Propos</h2>
                <div class="about-card">
                    <h3>Informations du Développeur</h3>
                    <p>Cette application de gestion de stock simple a été développée en utilisant HTML, CSS et JavaScript pur.</p>
                    <hr>
                    <p class="developer-info">Créé par : Mechack BUKASA L., Ingénieur Civil en Génie Info.</p>
                    <p class="developer-info">Contact : meschacklukengu@gmail.com</p>
                    <p class="developer-info">Téléphone : (+243) 972 847 505</p>
                    <p class="developer-info">Version : 1.0.0</p>
                </div>
                <div class="form-actions centered-actions">
                     <button type="button" class="btn btn-secondary" id="cancel-about-btn">RETOUR À L'INVENTAIRE</button>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 StockApp Melchisédech. Développé par Mechack B. L.</p>
        </footer>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
